name: Test Packaged SDKs

on:
  workflow_dispatch:
  push:
    paths:
      .github/workflows/test-sdk-packages.yml
    
jobs:
  test-php-sdk:
    strategy:
      fail-fast: false
      matrix:
        platform:
          - { os: ubuntu-latest,
              platform: linux }
          - { os: macos,
              platform: macos }
    uses: ./.github/workflows/test-server-sdk.yml
    with:
      os: ${{ matrix.platform.os }}
      platform: ${{ matrix.platform.platform }}
      sdkName: "eppo/php-sdk"
      sdkRelayDir: "php-sdk-relay"
    secrets: inherit
